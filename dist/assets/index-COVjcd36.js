import{h as L,n as u,u as S,j as e,L as x,b as h,e as l}from"./index-DCB2o80S.js";import{c as A,b as p,u as T,l as $,o as q}from"./Route-BzkLDGJv.js";import"./iconBase-BneYDday.js";import"./index-CzEfZKJO.js";const E=A().shape({email:p().email("Invalid email address").required("Email is required"),password:p().required("Password is required")}),I=()=>{const d=L(),b=u();let{state:n}=u();const t=n==null?void 0:n.from;console.log("===================================="),console.log(t),console.log("====================================");const r=b.state,m=r==null?void 0:r.from;console.log("===================================="),console.log(r==null?void 0:r.from),console.log("====================================");const f=T({defaultValues:{password:"",email:""},resolver:q(E)}),{register:g,handleSubmit:y,formState:j}=f,{errors:a}=j,{auth:w,setAuth:N}=S(),v=async k=>{try{const{email:s,password:c}=k,o=await h.post("http://localhost:5000/api/v1/auth/login",JSON.stringify({email:s,password:c}),{headers:{"Content-Type":"application/json"},withCredentials:!0});if(o&&o.status===200){console.log("==========res data================"),console.log(o==null?void 0:o.data),console.log("====================================");const i=o.data.data.accessToken;if(console.log("===========accessToken================="),console.log(i),console.log("==========accessToken==============="),localStorage.setItem("user",JSON.stringify({accessToken:i,email:s})),N(F=>({...F,accessToken:i,email:s})),console.log(w),l.success("Login successful"),t){d(`/${t||""}`);return}d(`/${m||""}`),console.log(JSON.stringify(o==null?void 0:o.data))}}catch(s){if(h.isAxiosError(s))if(s.response&&s.response.data){const c=s.response.data.message;l.error(c)}else l.error("An error occurred");else l.error("An error occurred"),console.error("An error occurred:",s);console.log(s)}};return e.jsx(e.Fragment,{children:e.jsx("section",{style:{backgroundImage:`url(${$})`},className:"bg-no-repeat bg-center bg-cover ",children:e.jsx("div",{className:"flex flex-col items-center justify-center px-6 py-8 mx-auto h-screen lg:py-0 ",children:e.jsx("div",{className:"w-full   shadow   md:mt-0 sm:max-w-md xl:p-0 bg-transparent",children:e.jsxs("div",{className:"p-6 space-y-4 rounded-3xl md:space-y-6 sm:p-8 backdrop-blur-md bg-black/50 ",children:[e.jsx("h1",{className:"text-xl font-bold leading-tight tracking-tight  md:text-2xl text-white",children:"Login"}),e.jsxs("form",{noValidate:!0,className:"space-y-4 md:space-y-6",onSubmit:y(v),children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-white",children:"Your email"}),e.jsx("input",{type:"email",...g("email"),id:"email",className:" border   sm:text-sm rounded-lg  block w-full p-2.5 bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500",placeholder:"name@company.com"}),e.jsx("div",{children:a.email?e.jsx("p",{className:"text-red-500 text-xs italic",children:a.email.message}):e.jsx("div",{style:{height:"1rem"}})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block mb-2 text-sm font-medium text-white",children:"Password"}),e.jsx("input",{type:"password",...g("password"),id:"password",placeholder:"••••••••",className:" border   sm:text-sm rounded-lg  block w-full p-2.5 bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500"}),e.jsx("div",{children:a.password?e.jsx("p",{className:"text-red-500 text-xs italic",children:a.password.message}):e.jsx("div",{style:{height:"1rem"}})})]}),e.jsx("button",{type:"submit",className:"w-full text-white bg-blue-500  focus:ring-4 focus:outline-none  font-medium rounded-lg text-sm px-5 py-2.5 text-center bg-primary-600 hover:bg-green-500 focus:ring-primary-800",children:"Login"}),e.jsxs("p",{className:"text-sm font-light text-gray-400",children:["Don't have an account yet?"," ",e.jsx(x,{to:"/signup",className:"font-medium   hover:underline text-blue-500",children:"Signup here"})]}),e.jsxs("p",{className:"text-sm font-light text-gray-400",children:["Forgot your password?"," ",e.jsx(x,{to:"/forgotpassword",className:"font-medium   hover:underline text-blue-500",children:"Forgot Password"})]})]})]})})})})})},V=()=>e.jsx(e.Fragment,{children:e.jsx(I,{})});export{V as default};
