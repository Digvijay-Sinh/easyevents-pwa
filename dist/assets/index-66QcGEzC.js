import{j as e,r as d,h as U,L as M,e as i,b as E,f as w}from"./index-DCB2o80S.js";import{R as F,n as z,p as T,q as A,M as k,r as $,s as _,t as R,v as L,w as G}from"./Route-BzkLDGJv.js";import{m as D,g as I,t as S,G as H,B as g,T as N}from"./iconBase-BneYDday.js";import{b as B}from"./index-CzEfZKJO.js";const O=a=>l=>{const r={};for(const o in l)a.includes(o)||(r[o]=l[o]);return r},P=a=>{const{children:l,className:r,horizontal:o,href:x,theme:u={}}=a,h=typeof x>"u"?"div":"a",p=Z(a),n=D(I().card,u);return e.jsxs(h,{"data-testid":"flowbite-card",href:x,className:S(n.root.base,n.root.horizontal[o?"on":"off"],x&&n.root.href,r),...p,children:[e.jsx(q,{...a}),e.jsx("div",{className:n.root.children,children:l})]})},q=({theme:a={},...l})=>{const r=D(I().card,a);return l.renderImage?l.renderImage(r,l.horizontal??!1):l.imgSrc?e.jsx("img",{"data-testid":"flowbite-card-image",alt:l.imgAlt??"",src:l.imgSrc,className:S(r.img.base,r.img.horizontal[l.horizontal?"on":"off"])}):null},Z=O(["renderImage","imgSrc","imgAlt","children","className","horizontal","href","theme"]);function Y(a){return H({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},child:[]},{tag:"path",attr:{d:"M6 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"},child:[]},{tag:"path",attr:{d:"M18 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"},child:[]},{tag:"path",attr:{d:"M6 12v-2a6 6 0 1 1 12 0v2"},child:[]},{tag:"path",attr:{d:"M15 9l3 3l3 -3"},child:[]}]})(a)}const J=["image/jpeg","image/png"],V=()=>{var v,b,y;const[a,l]=d.useState({userData:[],userParticipatedEvents:[],organizerEvents:[]}),[r,o]=d.useState(null),[x,u]=d.useState(null),h=U(),p=async s=>{const t=s.target.files?s.target.files[0]:null;if(o(t),u(null),t&&(console.log(t),!J.includes(t.type))){u("Only JPEG and PNG images are supported.");return}};d.useEffect(()=>{(async()=>{try{if(x){i.error("Please fix the image error before uploading");return}if(r){const t=new FormData;t.append("image",r);const m=await E.post("https://easyeventsbackend-pwa.onrender.com/api/v1/imageUpload/upload",t);i.success("Image uploaded successfully"),console.log("Upload successful:",m.data);const c=m.data.data,f=await w.post("https://easyeventsbackend-pwa.onrender.com/api/v1/auth/updateProfileImage",{filename:c});i.success("Profile image updated successfully"),j(),f.status===200&&(console.log("===========uploaded successfully==============="),console.log(f.data),console.log("===================================="))}else console.error("No image selected")}catch(t){console.error("Error uploading image:",t)}})()},[r]);const n=s=>{const t=Intl.DateTimeFormat().resolvedOptions().timeZone,m=new Date(s),c=new Date(m.toLocaleString("en-US",{timeZone:t}));console.log(c);const f=c.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0});return`${c.toDateString()} ${f}`},j=async()=>{try{const s=await w.get("/api/v1/events/getUserEventsDetails");console.log(s.data),l(s.data),console.log("=========categories==============")}catch(s){if(E.isAxiosError(s))if(s.response&&s.response.data){const t=s.response.data.message;i.error(t)}else i.error("An error occurred");else i.error("An error occurred"),console.error("An error occurred:",s);console.log(s)}};d.useEffect(()=>{j()},[]),d.useEffect(()=>{console.log("===================================="),console.log(a),console.log("====================================")},[a]);const C=s=>{w.delete(`/api/v1/events/${s}`).then(t=>{console.log(t),i.success("Event Deleted Successfully"),j()}).catch(t=>{console.log(t),i.error(t.response.data.message)})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mx-auto",style:{background:"linear-gradient(142deg, rgba(86,31,41,1) 0%, rgba(0,0,0,1) 25%, rgba(0,0,0,1) 75%, rgba(86,31,41,1) 100%)"},children:[e.jsxs("div",{className:"pt-10 px-2 sm:w-5/6 w-full mx-auto flex flex-col justify-between",children:[e.jsxs("h1",{className:"text-xl w-1/2 mx-auto  md:w-full text-center my-2 font-bold leading-tight tracking-wide  md:text-2xl text-white sm:text-left",children:["User Profile ",e.jsx("br",{})]})," "]}),e.jsxs("div",{className:"flex sm:w-5/6 w-full mx-auto sm:border border-gray-700  flex-col sm:flex-row rounded-xl ",children:[e.jsx("div",{className:"sm:w-1/3 sm:p-4 w-full p-1",children:e.jsxs("div",{className:"posterImage flex flex-col",children:[e.jsx("img",{className:"md:rounded-t-lg rounded-full w-1/2 mx-auto  md:w-full object-cover object-center aspect-ratio-rounded ",src:`https://easyeventsbackend-pwa.onrender.com/uploads/${(v=a.userData[0])==null?void 0:v.profileImage}`,alt:""})," ",e.jsxs("div",{className:"flex flex-col justify-center items-center",children:[e.jsx("p",{className:"text-white text-sm text-center",children:"Upload/Change Your Profile Image"}),e.jsx(g,{className:"w-auto",children:e.jsxs("label",{htmlFor:"cover",className:"flex cursor-pointer items-center justify-center gap-3 rounded bg-primary-400  text-sm font-medium text-white hover:bg-opacity-90 xs:px-4",children:[e.jsx("input",{onChange:p,type:"file",name:"cover",id:"cover",className:"sr-only"}),e.jsx("span",{children:e.jsx(B,{size:20})}),e.jsx("span",{className:"tracking-wide",children:"Update Image"})]})})]})]})}),e.jsxs("div",{className:"sm:w-2/3 sm:p-4 w-full p-1 ",children:[e.jsx("div",{className:"datetime flex items-center border border-gray-700 p-3 rounded-xl sm:py-3 backdrop-blur-md bg-black/50  ",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[" ",e.jsxs("div",{className:"username flex gap-2",children:[e.jsx(F,{className:"text-yellow-300 mr-2 text-xl md:text-2xl"}),e.jsx("span",{className:"text-sm   md:text-base text-white m-0",children:(b=a.userData[0])==null?void 0:b.name})]}),e.jsxs("div",{className:"username flex gap-2",children:[e.jsx(z,{className:"text-yellow-300 mr-2 text-xl md:text-2xl"}),e.jsx("span",{className:"text-sm   md:text-base text-white m-0",children:(y=a.userData[0])==null?void 0:y.email})]}),e.jsxs("div",{className:"username flex gap-2",children:[e.jsx(T,{className:"text-yellow-300 mr-2 text-xl md:text-2xl"}),e.jsx("span",{className:"text-sm   md:text-base text-white m-0",children:"+91 9378341199"})]})]})}),e.jsxs("div",{className:"datetime flex items-center justify-evenly m-1 p-3 gap-2 rounded-xl sm:py-3   ",children:[e.jsxs(P,{className:"bg-gradient-to-r from-fuchsia-600 to-pink-600 border-0 w-1/2 px-0",children:[e.jsx("span",{className:"text-sm   md:text-base text-white m-0",children:a.userParticipatedEvents.length}),e.jsxs("span",{className:"text-sm   md:text-base text-white m-0",children:["Events ",e.jsx("br",{className:"sm:hidden"})," Participated"]})]}),e.jsxs(P,{className:"bg-gradient-to-r from-fuchsia-600 to-pink-600 border-0 w-1/2",children:[e.jsx("span",{className:"text-sm   md:text-base text-white m-0",children:a.organizerEvents.length}),e.jsxs("span",{className:"text-sm   md:text-base text-white m-0",children:["Events ",e.jsx("br",{className:"sm:hidden"})," Hosted"]})]})]})]})]}),e.jsx("div",{className:""}),e.jsxs("div",{className:"pt-10 px-2 sm:w-5/6 w-full mx-auto flex flex-col justify-between",children:[e.jsx("h1",{className:"text-xl my-2 font-bold leading-tight tracking-wide  md:text-2xl text-white text-left",children:e.jsxs(N,{"aria-label":"Default tabs",className:"border-b-0",style:"underline",children:[e.jsx(N.Item,{active:!0,title:"Events Participated",icon:A,children:a.userParticipatedEvents.length>0?a.userParticipatedEvents.map(s=>{var t,m,c;return e.jsx(M,{to:`/event/${s.booking.event.id}`,children:e.jsxs("div",{className:"flex sm:w-full w-full  sm:border border-gray-700  flex-col sm:flex-row rounded-xl mt-3",children:[e.jsx("div",{className:"sm:w-1/3 flex items-center sm:p-4 w-full p-1",children:e.jsxs("div",{className:"posterImage w-full",children:[e.jsx("img",{className:"rounded-t-lg w-full object-cover object-center aspect-ratio-16-9 ",src:`https://easyeventsbackend-pwa.onrender.com/uploads/${(t=s.booking.event.images[0])==null?void 0:t.poster_image}`,alt:""})," "]})}),e.jsx("div",{className:"sm:w-2/3 sm:p-4 w-full p-1 ",children:e.jsxs("div",{className:"datetime flex flex-col sm:flex-row items-center p-3 rounded-xl sm:py-3 backdrop-blur-md bg-black/50  ",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[" ",e.jsxs("div",{className:"username w-full flex gap-2 justify-between items-center",children:[e.jsx("span",{className:"text-sm   md:text-base text-white m-0",children:s.booking.event.title}),e.jsxs("span",{className:"text-sm max-w-fit p-3 rounded-lg bg-gradient-to-r from-fuchsia-600 to-pink-600   md:text-base text-white m-0",children:[s.booking.numberOfTickets," x ₹"," ",s.booking.event.price," = ₹"," ",s.booking.totalAmount]})]}),e.jsxs("div",{className:"username flex gap-2",children:[e.jsx(k,{className:"text-yellow-300 mr-2 text-xl md:text-2xl"}),e.jsxs("span",{className:"text-sm   md:text-base text-white m-0",children:[n((m=s.booking.event)==null?void 0:m.start_date),"-",n((c=s.booking.event)==null?void 0:c.end_date)]})]}),e.jsxs("div",{className:"username flex gap-2",children:[e.jsx(Y,{className:"text-yellow-300 mr-2 text-xl md:text-2xl"}),e.jsxs("span",{className:"text-sm   md:text-base text-white m-0",children:["Booking Status:"," ",s.booking.bookingStatus]})]}),e.jsxs("div",{className:"username flex gap-2",children:[e.jsx($,{className:"text-yellow-300 mr-2 text-xl md:text-2xl"}),e.jsxs("span",{className:"text-sm   md:text-base text-white m-0",children:["Payment Status:"," ",s.booking.paymentStatus]})]})]}),e.jsx("div",{className:"w-[26%] h-full flex justify-end items-end",children:e.jsx("img",{src:`https://easyeventsbackend-pwa.onrender.com/uploads/${s.booking.qrCodeImageUrl}`,alt:"qrcode"})}),e.jsx("div",{})]})})]})})}):e.jsx("div",{className:"text-white text-center h-36",children:"No Events Participated"})}),e.jsx(N.Item,{title:"Events Hosted",icon:_,children:a.organizerEvents.length>0?a.organizerEvents.map(s=>{var t;return e.jsxs("div",{className:"flex sm:w-full w-full  sm:border border-gray-700  flex-col sm:flex-row rounded-xl mt-3",children:[e.jsx("div",{className:"sm:w-1/3 flex items-center sm:p-4 w-full p-1",children:e.jsxs("div",{className:"posterImage w-full",children:[e.jsx("img",{className:"rounded-t-lg w-full object-cover object-center aspect-ratio-16-9 ",src:`https://easyeventsbackend-pwa.onrender.com/uploads/${(t=s.images[0])==null?void 0:t.poster_image}`,alt:""})," "]})}),e.jsxs("div",{className:"sm:w-2/3 justify-between sm:p-4 w-full p-1 flex flex-col",children:[e.jsx("div",{className:"datetime flex items-center p-3 rounded-xl sm:py-3 backdrop-blur-md bg-black/50  ",children:e.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[" ",e.jsxs("div",{className:"username w-full flex gap-2 justify-between items-center",children:[e.jsx("span",{className:"text-sm   md:text-base text-white m-0",children:s.title}),e.jsx("span",{className:"text-sm   md:text-base text-white m-0",children:e.jsxs(g,{className:"p-0",onClick:()=>{h(`/eventhostedpage/${s.id}`)},children:[e.jsx(R,{className:"text-xl mr-2"})," View Event"]})})]}),e.jsxs("div",{className:"username flex gap-2",children:[e.jsx(k,{className:"text-yellow-300 mr-2 text-xl md:text-2xl"}),e.jsxs("span",{className:"text-sm   md:text-base text-white m-0",children:[n(s==null?void 0:s.start_date),"-",n(s==null?void 0:s.end_date)]})]})]})}),e.jsx("div",{className:"datetime flex justify-end items-center p-3 rounded-xl sm:py-3 backdrop-blur-md bg-black/50  ",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[" ",e.jsxs("div",{className:"username w-full flex gap-2 justify-between items-center",children:[e.jsxs(g,{onClick:()=>{h(`/editevent/${s.id}`)},children:[e.jsx(L,{className:"text-xl mr-2"})," Update Event"]}),e.jsxs(g,{onClick:()=>{C(s.id)},className:"bg-red-700",children:[e.jsx(G,{className:"text-xl mr-2"}),"Cancel Event"]})]})]})})]})]})}):e.jsx("div",{className:"text-white text-center h-36",children:"No Events Hosted"})})]})})," "]})]})})},ee=()=>e.jsx("div",{children:e.jsx(V,{})});export{ee as default};
